<!doctype html>
<html>
<head>
    <title>GeoGlyph</title>
    <link rel="stylesheet" href="profile.css">
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.0/mapbox-gl.css' rel='stylesheet' />
</head>
<body>
  <!--HEADER SECTION -->
    <section class="page-header text-center">
        <h1><span class="fa fa-anchor"></span> Profile Page</h1>
        <a href="/logout" class="btn btn-default btn-sm">Logout</a>
    </section>


<!--========================================================================  -->
    <!--FIRST SECTION-->

    <section class="row">

        <!-- LOCAL INFORMATION -->
        <!--TODO: Add geolocation to this section-->
        <section class="glyphMap">

            <section class="well">

                <section>
                  <img src="img/atikh-bana-Ycds6emp7BA-unsplash.jpg" alt="avatar">
                </section>

                <h3><span class="fa fa-user"></span> Local</h3>

                <% if (user.local.email) { %>
                    <p>
                        <strong>id</strong>: <%= user._id %><br>
                        <strong>email</strong>: <%= user.local.email %><br>
                        <strong>password</strong>: <%= user.local.password %>
                    </p>

                    <a href="/unlink/local" class="btn btn-default">Unlink</a> <% } else { %>
                    <a href="/connect/local" class="btn btn-default">Connect Local</a>
                <% } %>

            </section>
        </section>

<!--========================================================================  -->
        <!--SECOND SECTION-->

  <section class="userProfile">
          <h2>Glyph Map</h2>

          <!--KW Sat: Removed form that I created and coppied the form from the geolocation project -->
          <form action="/messages" method="POST">
          <input type="text" placeholder="name" name="name">
          <input type="text" placeholder="What's going on?" name="quote">

          <!--Hidden inpu box to store location of user on click-->
          <input hidden id="location" type="text" name="locate">
          <!--==============SEE ABOVE========================  -->

          <button id="find">Find my location</button>
          <button id="submitBtn" type="submit">Submit</button>
          <button id="queryBtn" type="submit" name="button">Query</button>
        </form>

        <!-- THE MAP -->

        <!-- <section id='map'></section> -->


<!--GeoLocation Information  -->
<!-- Copy and pasted ejs from geo glyph auth file -->
<!-- Not sure if I am supposed to change the class name of the section to be consistent with rmoutes js, may be a problem later -->
    <section class="scrollSubmissions">
      <ul class="messages">
        <% for(var i=0; i<messages.length; i++) { %>
          <li class="messages" id='<%= messages[i]._id %>'>
            <span>Messages:<%=messages[i].name %></span>
            <!-- this is where the error is  -->
            <span>Quote:<%=messages[i].quote %></span>
            <!--KW SAT: If all else fails ADD messages[i].location.lat below  -->
            <span>Latitude: <%= messages[i].location.coordinates[0]%></span>
            <span>Longitude: <%= messages[i].location.coordinates[1] %></span>
        <% } %>
      </ul>
    </section>
  </section>

<!-- TODO: Display the other users' name and meassage and location in the dom -->

</section>

<!--QUESTION: Am I able to run two script on the same page, is it necessary-->
<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.1/mapbox-gl-geocoder.min.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.1/mapbox-gl-geocoder.css' type='text/css' />
<script src="location.js" charset="utf-8"></script>
<script src="main.js"></script>


</body>
</html>
